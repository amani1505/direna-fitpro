<form [formGroup]="memberForm">
  <h3
    class="font-[600] text-[24px] tracking-wide font-catamaran capitalize text-gray-900 dark:text-night-50"
  >
    Add new member
  </h3>
  <div class="grid gap-3 md:grid-cols-2 lg:grid-cols-3">
    <div class="form__group">
      <div class="relative">
        <label class="block mb-1 text-sm font-medium text-gray-700"
          >Fullname</label
        >
        <input
          type="text"
          id="fullname"
          [ngClass]="{
            'is__invalid-input': submitted && memberForm['fullname'].errors,
          }"
          class="block text-md peer input-field"
          placeholder="Enter Fullname "
          formControlName="fullname"
          required
        />
      </div>
      <div
        *ngIf="submitted && memberForm['fullname'].hasError('required')"
        class="is__invalid-error"
      >
        <div *ngIf="memberForm['fullname'].hasError('required')">
          Fullname is Required
        </div>
      </div>
    </div>

    <div class="form__group">
      <div class="relative">
        <label class="block mb-1 text-sm font-medium text-gray-700"
          >Email</label
        >
        <input
          type="email"
          id="email"
          [ngClass]="{
            'is__invalid-input': submitted && memberForm['email'].error,
          }"
          class="block text-md peer input-field"
          placeholder="direna@mail.com "
          formControlName="email"
        />
      </div>
      <div
        *ngIf="submitted && memberForm['email'].error"
        class="is__invalid-error"
      >
        <div *ngIf="memberForm['email'].error['required']">Required field</div>
        <div *ngIf="memberForm['email'].error['email']">
          Email must be an email address valid
        </div>
      </div>
    </div>

    <div class="form__group">
      <div class="relative">
        <label class="block mb-1 text-sm font-medium text-gray-700"
          >Phone Number</label
        >
        <input
          type="text"
          id="phone"
          prefix="+255 "
          mask="(000) 000 000"
          [showMaskTyped]="true"
          [validation]="true"
          [ngClass]="{
            'is__invalid-input': submitted && memberForm['phone'].error,
          }"
          class="block text-md peer input-field"
          formControlName="phone"
        />
      </div>
      <!-- <div
        *ngIf="submitted && memberForm['phone'].error"
        class="is__invalid-error"
      >
        <div *ngIf="memberForm['phone'].error['required']">Required field</div>
      </div> -->
    </div>

    <div class="form__group">
      <label class="block text-sm font-medium text-gray-700">Gender</label>
      <div class="mt-2 space-x-4">
        <label class="inline-flex items-center">
          <input
            type="radio"
            formControlName="gender"
            value="male"
            class="w-5 h-5 border-gray-300 form-radio text-primary-600 focus:ring-primary-500"
          />
          <span class="ml-2">Male</span>
        </label>
        <label class="inline-flex items-center">
          <input
            type="radio"
            formControlName="gender"
            value="female"
            class="w-5 h-5 border-gray-300 form-radio text-primary-600 focus:ring-primary-500"
          />
          <span class="ml-2">Female</span>
        </label>
      </div>
      <div
        *ngIf="submitted && memberForm.get('gender')?.errors"
        class="is__invalid-error"
      >
        <div *ngIf="memberForm.get('gender')?.errors?.['required']">
          Please select a gender
        </div>
      </div>
    </div>
    <div class="form__group">
      <label class="block mb-1 text-sm font-medium text-gray-700"
        >Services</label
      >
      <MultiSelect
        [placeholder]="'Select the Services'"
        [options]="transformToMultiSelectOptions(services())"
        (selectionChange)="selectService($event)"
        (validationChange)="onValidationChange($event)"
        [canAdd]="true"
        (onAdd)="openServiceModal()"
        [buttonLabel]="'Add New Service'"
      ></MultiSelect>
    </div>

    <div class="form__group">
      <label class="block mb-1 text-sm font-medium text-gray-700">Branch</label>
      <SeachableSelect
        [placeholder]="'Select Branch'"
        [options]="transformToSelectOptions(branches())"
        (selectionChange)="selectBranch($event)"
        [canAdd]="true"
        (onAdd)="openBranchModal()"
        [buttonLabel]="'Add New Branch'"
      ></SeachableSelect>
    </div>

    <div class="form__group">
      <div class="relative">
        <label class="block mb-1 text-sm font-medium text-gray-700"
          >Weight</label
        >
        <input
          type="text"
          id="weight"
          suffix=" kg"
          mask="0000"
          [validation]="true"
          [ngClass]="{
            'is__invalid-input': submitted && memberForm['weight'].error,
          }"
          class="block text-md peer input-field"
          placeholder="Enter the weight"
          formControlName="weight"
        />
      </div>
      <div
        *ngIf="submitted && memberForm['weight'].errors"
        class="is__invalid-error"
      >
        <div *ngIf="memberForm['weight'].errors['required']">
          Weight field is Required
        </div>
      </div>
    </div>

    <div class="form__group">
      <div class="relative">
        <label class="block mb-1 text-sm font-medium text-gray-700">Age</label>
        <input
          type="number"
          id="age"
          [ngClass]="{
            'is__invalid-input': submitted && memberForm['age'].error,
          }"
          class="block text-md peer input-field"
          formControlName="age"
        />
      </div>
      <!-- <div
        *ngIf="submitted && memberForm['phone'].error"
        class="is__invalid-error"
      >
        <div *ngIf="memberForm['phone'].error['required']">Required field</div>
      </div> -->
    </div>

    <div class="form__group">
      <div class="relative">
        <label class="block mb-1 text-sm font-medium text-gray-700"
          >Height</label
        >
        <input
          type="text"
          id="height"
          suffix=" cm"
          mask="0000"
          [validation]="true"
          [ngClass]="{
            'is__invalid-input': submitted && memberForm['height'].error,
          }"
          class="block text-md peer input-field"
          placeholder="Enter Height "
          formControlName="height"
        />
      </div>
    </div>
    <div class="form__group">
      <div class="relative">
        <label class="block mb-1 text-sm font-medium text-gray-700">Goal</label>
        <input
          type="text"
          id="goal"
          [ngClass]="{
            'is__invalid-input': submitted && memberForm['goal'].error,
          }"
          class="block text-md peer input-field"
          placeholder="Enter Goal "
          formControlName="goal"
        />
      </div>
      <div
        *ngIf="submitted && memberForm['goal'].error"
        class="is__invalid-error"
      >
        <div *ngIf="memberForm['goal'].error['required']">
          Goal Field is Required
        </div>
      </div>
    </div>
  </div>
  <div class="flex items-center justify-end gap-3 p-3">
    <button
      type="submit"
      (click)="onSubmit()"
      class="px-5 py-2 text-white bg-red-500 rounded-lg font-[500] hover:bg-red-700"
    >
      Cancel
    </button>
    <button
      type="submit"
      (click)="onSubmit()"
      class="px-5 py-2 text-white bg-green-500 rounded-lg font-[500] hover:bg-green-700"
    >
      Add
    </button>
  </div>
</form>
<add-service-modal [isModalOpen]="isServiceModalOpen"></add-service-modal>
<add-branch-modal [isModalOpen]="isBranchModalOpen"></add-branch-modal>

